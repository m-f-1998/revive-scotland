<app-navbar />
<app-slider [slides]="slides()" />
@if (loading()) {
  <div class="d-flex flex-column align-items-center m-3">
    <fa-icon [icon]="iconSvc.getIcon('fas', 'spinner')" animation="spin" size="2x" class="mb-2" />
    Loading...
  </div>
} @else if (events().length === 0) {
  <div class="d-flex flex-column align-items-center m-3">
    <fa-icon [icon]="iconSvc.getIcon('fas', 'info-circle')" size="2x" class="mb-2" />
    <p>No Events Found</p>
    <p class="m-0">Check back later for updates!!</p>
  </div>
} @else {
  <div class="m-3">
    @for (event of events(); track $index) {
      <div class="d-flex flex-row flex-wrap justify-content-center">
        <div class="card m-2 event-card">
          @if (event.showcase_image) {
            <img
              [attr.src]="'/api/img/' + event.showcase_image + '?w=640&f=webp'"
              [attr.srcset]="
                '/api/img/' + event.showcase_image + '?w=320&f=webp 320w, ' +
                '/api/img/' + event.showcase_image + '?w=640&f=webp 640w, ' +
                '/api/img/' + event.showcase_image + '?w=1024&f=webp 1024w'
              "
              sizes="(max-width: 600px) 100vw, 600px"
              [attr.alt]="event.title || 'Event image'"
              loading="lazy"
              decoding="async"
              class="card-img-top event-image"
            />
          } @else {
            <img src="/api/img/placeholder.jpg?w=640&f=webp"
              srcset="
                /api/img/placeholder.jpg?w=320&f=webp 320w,
                /api/img/placeholder.jpg?w=640&f=webp 640w,
                /api/img/placeholder.jpg?w=1024&f=webp 1024w
              "
              sizes="(max-width: 600px) 100vw, 600px"
              alt="Placeholder Image"
              loading="lazy"
              decoding="async"
              class="card-img-top event-image"
            />
          }
          <div class="card-body">
            <div class="card-title">
              <h4>{{event.title}}</h4>
            </div>
            <figcaption class="figure-caption mt-2 mb-3">
              {{event.description}}
            </figcaption>
            <div class="card-text d-flex flex-column gap-2 mb-4">
              @if (event.start || event.end) {
                <div>
                  <fa-icon [icon]="iconSvc.getIcon('fas', 'calendar')" class="me-2" />
                  @if (event.start && event.end) {
                    @if(dateSvc.sameDay(event.start, event.end)) {
                      {{dateSvc.reformat(event.start, 'E do LLL yyyy h:mma')}} - {{dateSvc.reformat(event.end, 'h:mma')}}
                    } @else {
                      {{dateSvc.reformat(event.start, 'E do LLL yyyy')}} - {{dateSvc.reformat(event.end, 'E do LLL yyyy')}}
                    }
                  } @else if (event.start && !event.end) {
                    From {{dateSvc.reformat(event.start, 'E do LLL yyyy h:mma')}}
                  } @else if (!event.start && event.end) {
                    Until {{dateSvc.reformat(event.end, 'E do LLL yyyy h:mma')}}
                  }
                </div>
              }
              @if (event.address) {
                <div>
                  <fa-icon [icon]="iconSvc.getIcon('fas', 'map-marker')" class="me-2" />
                  @if (event.location_name) {
                    {{event.location_name}},&nbsp;
                  }
                  @if (event.address.road) {
                    {{event.address.road}},&nbsp;
                  }
                  @if (event.address.village) {
                    {{event.address.village}},&nbsp;
                  }
                  @if (event.address.county) {
                    {{event.address.county}},&nbsp;
                  }
                  @if (event.address.country) {
                    {{event.address.country}},&nbsp;
                  }
                  @if (event.address.postcode) {
                    {{event.address.postcode}}
                  }
                </div>
              }
              <!-- @if (event.price) {
                <div>
                  <fa-icon [icon]="iconSvc.getIcon('fas', 'money-bill')" class="me-2" />
                  Â£{{event.price}} approx.
                </div>
              } -->
            </div>
            <div class="d-flex gap-2">
              <button (click)="openQuestionnaire(event)" class="btn btn-primary">
                Express your interest...
              </button>
            </div>
          </div>
        </div>
      </div>
    }
  </div>
  <figure class="p-4 p-lg-5 text-center m-0 bg-body-tertiary">
    <blockquote class="blockquote mb-4">
      <p class="text-serif">
        Prayer, as a means of drawing ever new strength from Christ, is concretely and urgently needed.
      </p>
    </blockquote>
    <figcaption class="blockquote-footer mb-0">
      <cite class="text-small">Benedict XVI</cite>
    </figcaption>
  </figure>

  <app-contact />
}
<app-footer />